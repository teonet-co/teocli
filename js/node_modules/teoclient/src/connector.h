/**
 * File:   connector.h
 * Author: Alexander Ksenofontov <aksenofo@yahoo.ru>
 *
 * Created on August 3, 2016, 12:32 PM
 */

#pragma once


#include <stddef.h>
#include <sys/types.h>
#include <string>
#include "libteol0/teonet_l0_client.h"

#include <nan.h>

class Connector: public Nan::ObjectWrap {
public:
    Connector(const std::string& ip, int port)
    : connector_(nullptr)
    , ip_(ip)
    , port_(port)
    {}

    virtual ~Connector();

    static v8::Local<v8::Value> createNewInstance(const Nan::FunctionCallbackInfo<v8::Value>& info);

    static NAN_MODULE_INIT(Init);

private:

    static NAN_METHOD(New); // constructor

    static NAN_METHOD(Login); // Login method

    static Nan::Persistent<v8::Function> constructor;

    bool connect();

private:

    teoLNullConnectData* connector_;

    std::string ip_;

    int port_;
};
